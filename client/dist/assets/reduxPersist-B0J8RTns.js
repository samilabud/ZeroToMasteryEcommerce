import{c as W}from"./redux-7jweKlMH.js";var D="persist:",F="persist/FLUSH",R="persist/REHYDRATE",K="persist/PAUSE",k="persist/PERSIST",H="persist/PURGE",$="persist/REGISTER",G=-1;function j(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(t){return typeof t}:j=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?T(t,!0).forEach(function(n){Y(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function J(e,r,t,n){n.debug;var s=N({},t);return e&&j(e)==="object"&&Object.keys(e).forEach(function(a){a!=="_persist"&&r[a]===t[a]&&(s[a]=e[a])}),s}function M(e){var r=e.blacklist||null,t=e.whitelist||null,n=e.transforms||[],s=e.throttle||0,a="".concat(e.keyPrefix!==void 0?e.keyPrefix:D).concat(e.key),c=e.storage,f;e.serialize===!1?f=function(h){return h}:typeof e.serialize=="function"?f=e.serialize:f=B;var u=e.writeFailHandler||null,v={},o={},i=[],m=null,y=null,_=function(h){Object.keys(h).forEach(function(p){P(p)&&v[p]!==h[p]&&i.indexOf(p)===-1&&i.push(p)}),Object.keys(v).forEach(function(p){h[p]===void 0&&P(p)&&i.indexOf(p)===-1&&v[p]!==void 0&&i.push(p)}),m===null&&(m=setInterval(d,s)),v=h};function d(){if(i.length===0){m&&clearInterval(m),m=null;return}var l=i.shift(),h=n.reduce(function(p,S){return S.in(p,l,v)},v[l]);if(h!==void 0)try{o[l]=f(h)}catch(p){console.error("redux-persist/createPersistoid: error serializing state",p)}else delete o[l];i.length===0&&g()}function g(){Object.keys(o).forEach(function(l){v[l]===void 0&&delete o[l]}),y=c.setItem(a,f(o)).catch(w)}function P(l){return!(t&&t.indexOf(l)===-1&&l!=="_persist"||r&&r.indexOf(l)!==-1)}function w(l){u&&u(l)}var E=function(){for(;i.length!==0;)d();return y||Promise.resolve()};return{update:_,flush:E}}function B(e){return JSON.stringify(e)}function C(e){var r=e.transforms||[],t="".concat(e.keyPrefix!==void 0?e.keyPrefix:D).concat(e.key),n=e.storage;e.debug;var s;return e.deserialize===!1?s=function(c){return c}:typeof e.deserialize=="function"?s=e.deserialize:s=V,n.getItem(t).then(function(a){if(a)try{var c={},f=s(a);return Object.keys(f).forEach(function(u){c[u]=r.reduceRight(function(v,o){return o.out(v,u,f)},s(f[u]))}),c}catch(u){throw u}else return})}function V(e){return JSON.parse(e)}function X(e){var r=e.storage,t="".concat(e.keyPrefix!==void 0?e.keyPrefix:D).concat(e.key);return r.removeItem(t,q)}function q(e){}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?A(t,!0).forEach(function(n){Q(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Z(e,r){if(e==null)return{};var t=ee(e,r),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function ee(e,r){if(e==null)return{};var t={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(r.indexOf(s)>=0)&&(t[s]=e[s]);return t}var re=5e3;function fe(e,r){var t=e.version!==void 0?e.version:G;e.debug;var n=e.stateReconciler===void 0?J:e.stateReconciler,s=e.getStoredState||C,a=e.timeout!==void 0?e.timeout:re,c=null,f=!1,u=!0,v=function(i){return i._persist.rehydrated&&c&&!u&&c.update(i),i};return function(o,i){var m=o||{},y=m._persist,_=Z(m,["_persist"]),d=_;if(i.type===k){var g=!1,P=function(x,b){g||(i.rehydrate(e.key,x,b),g=!0)};if(a&&setTimeout(function(){!g&&P(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},a),u=!1,c||(c=M(e)),y)return O({},r(d,i),{_persist:y});if(typeof i.rehydrate!="function"||typeof i.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return i.register(e.key),s(e).then(function(S){var x=e.migrate||function(b,ue){return Promise.resolve(b)};x(S,t).then(function(b){P(b)},function(b){P(void 0,b)})},function(S){P(void 0,S)}),O({},r(d,i),{_persist:{version:t,rehydrated:!1}})}else{if(i.type===H)return f=!0,i.result(X(e)),O({},r(d,i),{_persist:y});if(i.type===F)return i.result(c&&c.flush()),O({},r(d,i),{_persist:y});if(i.type===K)u=!0;else if(i.type===R){if(f)return O({},d,{_persist:O({},y,{rehydrated:!0})});if(i.key===e.key){var w=r(d,i),E=i.payload,l=n!==!1&&E!==void 0?n(E,o,w,e):w,h=O({},l,{_persist:O({},y,{rehydrated:!0})});return v(h)}}}if(!y)return r(o,i);var p=r(d,i);return p===d?o:v(O({},p,{_persist:y}))}}function z(e){return ie(e)||ne(e)||te()}function te(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ne(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function ie(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function U(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?U(t,!0).forEach(function(n){se(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function se(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var L={registry:[],bootstrapped:!1},ae=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return I({},r,{registry:[].concat(z(r.registry),[t.key])});case R:var n=r.registry.indexOf(t.key),s=z(r.registry);return s.splice(n,1),I({},r,{registry:s,bootstrapped:s.length===0});default:return r}};function le(e,r,t){var n=W(ae,L,void 0),s=function(u){n.dispatch({type:$,key:u})},a=function(u,v,o){var i={type:R,payload:v,err:o,key:u};e.dispatch(i),n.dispatch(i)},c=I({},n,{purge:function(){var u=[];return e.dispatch({type:H,result:function(o){u.push(o)}}),Promise.all(u)},flush:function(){var u=[];return e.dispatch({type:F,result:function(o){u.push(o)}}),Promise.all(u)},pause:function(){e.dispatch({type:K})},persist:function(){e.dispatch({type:k,register:s,rehydrate:a})}});return c.persist(),c}export{le as a,fe as p};
